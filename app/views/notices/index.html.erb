
   <div class="row">
     <div class="pull-right hide">
      <a id="new_modal_link" href="#myModal_new" role="button" class="btn btn-primary btn-large">New</a>
    </div>
          <div class="tabbable" id="notes_tab"> <!-- Only required for left/right tabs -->
            <ul class="nav nav-tabs">
              <li class="active" >
                <a href="#private_tab" data-toggle="tab" access-type="private">Private Notes</a>
              </li>
              <li>
                <a href="#public_tab" data-toggle="tab" access-type="public">Public Notes</a>
              </li>
              <li class="refresh_notices hide">
                <label class = "btn btn-danger">Reset Search</label>
               </li>
            </ul>
            <div class="tabbg_first"></div>
            <div class="tab-content tabbg_middle">
              <div class="tab-pane active" id="private_tab">

                <div class="board_container context-menu-board" id="board_private">

                    <ul>
                      <% unless @private_notices.nil?%>
                       <%@private_notices.each do |notice| %>
                        <li class="context-menu-note-private-own notice" type="private" id="<%= notice.id %>">
                         <span class="notice" style="color:<%=notice.user_color%>">
                          <img src="assets/pin.png" class="sticky_pin">
                          <h4 class="notice_title"><%=notice.title%></h4>
                          <p class="notice_content"><%=notice.content.html_safe%></p>

                          <span class='notice_author '><%= notice.user_name %></span>
                          <span class='notice_time '><%= notice.updated_at.strftime("%d-%m-%Y") %></span>

                         </span>
                        </li>
                       <%end%>
                      <%end%>

                    </ul>
                </div>

              </div>
              <div class="tab-pane" id="public_tab">

                <div class="board_container context-menu-board" id="board_public">
                  <!-- <ul class="main_ul"> -->
                  <!-- <div class="container"> -->
                  <div class="row">
                  
                     <%
                     user_id_notices=0
                     first="yes"
                     marginTop=0
                     marginLeft=0
                     column=0

                    @public_notices.each do |notice| 
                          
                          marginTop+=25
                          marginLeft+=10
                         if(user_id_notices!=notice.user_id)
                              current_user_notices=@public_notices.where('user_id = ?', notice.user_id).count
                              height=( current_user_notices * 20)+200
                              user_id_notices=notice.user_id

                               # marginTop=current_user_notices*25
                               # marginLeft=current_user_notices*10

                              if(first=="yes") 
                                 first="no" 
                              else %>
                                </ul></div>
                              <% end

                              if(column%3==0) %>
                                  </div><div class="row">
                              <% end 
                               
                              column =column+1  %>

                            <div class="span3" style="height:<%=height%>px">
                            <ul class="inner_list">
                              <% marginTop = 0 %>
                              <% marginLeft = 0 %>

                         <% end  %>

                        <% if(notice.user_id == @user.id) %>
                            <% ownclass= "context-menu-note-public-own" %>
                        <% else %>
                            <% ownclass= "context-menu-note-public" %>
                        <% end %>
                        
                        <li  class="<%=ownclass%>  notice notice_list" style="margin-top:<%=marginTop%>px;margin-left:<%=marginLeft%>px;" type="public" id="<%= notice.id %>">
                         <span class="notice"  style="color:<%=notice.user_color%>;">
                          <img src="assets/pin.png" class="sticky_pin">
                          <h4 class="notice_title"><%=notice.title%></h4>
                          <p class="notice_content"><%=notice.content.html_safe%></p>

                          <span class='notice_author '><%= notice.user_name %></span>
                          <span class='notice_time '><%= notice.updated_at.strftime("%d-%m-%Y") %></span>
                         </span>
                        </li>


                    <%end%>

                  </ul>
                </div>
              </div>
              <!-- </div> -->
              <!-- </ul> -->
                </div>

              </div>

            </div>              <div class="tabbg_last"></div>

          </div>

        </div>


<!-- Modal -->
<div id="myModal_new" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Create Notice</h3>
  </div>
  <div class="modal-body">
    <%= form_for Notice.new,:url=>notices_url, :format=>"js",:html => { :multipart => true }, :remote => true do |f| %>
      <table cell-padding="5" cell-spacing="5">
        <tr>
          <td>
            <%= f.label :title  %>
          </td>
          <td>
            <%= f.text_field :title ,:required => true ,:maxlength => 20 %><br />
          </td>
        </tr>
        <tr>
<!--           <td>
            <%= f.label :access_type %>
          </td>
 -->     <td>
            <%= f.hidden_field :access_type %>
          </td>
        </tr>
        <tr>
          <td>
            <%= f.label :content %>
          </td>
          <td>
            <%= f.text_area :content, :rows => 5 ,:cols => 10 ,:required => true %> <span id="char_left"></span><br />
          </td>
        </tr>
        
        <tr>
          <td>
            Add Images
          </td>
          <td>
            <%= f.file_field :img, multiple: true, :accept=>"image/*" %>
          </td>
        </tr>
        <tr>
          <td></td>
          <td>
            <%= f.submit :class => 'btn btn-primary' ,:disable_with => "Saving note..."  %>
            <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
          </td>
        </tr>
      </table>
    <% end %>
  </div>
  <div class="modal-footer">
 </div>
</div>


<!-- Modal -->
<div id="myModal_comment" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Add Comment</h3>
  </div>
  <div class="modal-body">
    <%= form_for Comment.new,:html => { :multipart => true }, :remote => true do |f| %>
            <%= f.hidden_field :user_id, :value => @user.id %>
            <%= f.hidden_field :notice_id %>
      <table cell-padding="5" cell-spacing="5">
        <tr>
          <td>
            <%= f.label :comment %>&nbsp;&nbsp;&nbsp;
          </td>
          <td>
            <%= f.text_area :comment, :rows => 5 ,:cols => 10 ,:required => true, :maxlength => 100 %> <span id="char_left"></span><br />
          </td>
        </tr>

        <tr>
          <td></td>
          <td>
            <%= f.submit :class => 'btn btn-primary' ,:disable_with => "Saving Comment..."  %>
            <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
          </td>
        </tr>
      </table>
    <% end %>
  </div>
  <div class="modal-footer">
 </div>
</div>



<!-- Modal -->
<div id="email_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Send By Email</h3>
  </div>
  <div class="modal-body">
  <form id="send_by_email">
    <input type="hidden" id="mail_noteid" value="">
    <label >Email: </label> <input id="email_send" type="email" placeholder="Enter the email" name="email-send" required>
  </form>
  </div>
  <div class="modal-footer">
      <input type="button" id="send_email_btn" value="Send Mail" data-loading-text="Sending..."  class="btn btn-primary">
      <input type="button" id="cancel_email" value="Cancel" class="btn">
 </div>
</div>

<!-- Modal -->
<div id="search_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Search</h3>
  </div>
  <div class="modal-body">
    <form id="search_by_keyword">
    <input type="hidden" id="search_board" value="">
    <label >Search: </label> <input name="search_keyword" id="search_keyword" type="text" placeholder="Enter the keyword"></form>

  </div>
  <div class="modal-footer">
      <button data-loading-text="searching..! Please Wait..!" data-toggle="button"  id="search_btn" class="btn btn-primary">Search</button>
      <input type="button" id="cancel_search" value="Cancel" class="btn">
 </div>
</div>

<!-- Modal -->
<div id="setting_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Board Settings</h3>
  </div>
  <div class="modal-body">
    <%= render :template =>  '/users/board_settings' , :locals => { :setting => current_user.setting }  %>
  </div>
</div>


<script type="text/template" id="notice_template">
  <li class="<%%=element.className%> obj_class" style="<%%=element.set_margin%>" type="<%%=element.type%>" id="<%%=element.id%>">


      <span class="notice" style="position:relative;color:<%%=element.notice_color%>;">

          <img src="assets/pin.png" class="sticky_pin">
          <img src="assets/comment_icon.png" class="comment_icon <%%=element.hidden_class_comment%>"><h6 class="comment_count"><%%=element.comment_count%></h6>
          <img src="assets/comment_add.png" class="add_comment_icon">
          <img src="assets/img_icon.png" class="img_icon <%%=element.hidden_class_img%>"><h6 class="img_count"><%%=element.img_count%></h6>
          <h4 class='notice_title'><%%=element.title%></h4>
          <p class='notice_content'><%%=element.content%></p>

          <p class='notice_author'><%%=element.author%></p>
          <p class='notice_time '><%%=element.updated_at%></p>

      <div class="images_popup hide"><%%=element.images_popup%></div>
      <div class="comments_popup hide" ><%%=element.comments_popup%></div>
      </span>
  </li>
</script>
      <!-- <span class="notice" style="position:relative;color:<%%=element.text_color%>;background:<%%=element.notice_color%>;z-index:<%%=element.z_index%>"> -->
<script>
  window.new_notice_url = "<%=notices_url%>";
  window.edit_notice_url = "<%=notices_url%>";
</script>
<!-- validations -->



